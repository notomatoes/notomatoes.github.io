---
title: python tricks
categories: [python] 
comments: true
---
## 遇到的坑
1. 函数参数注解 `n: List` 报错  
**解决方案**: `from typing import List` 


## Basic
### <big>`set()`</big> 去重之后的list
```python
# 重复的被删除
x = set('runoob')
y = set('google')
x, y
```
`(set(['b', 'r', 'u', 'o', 'n']), set(['e', 'o', 'g', 'l']))`

```python
# 交集
x & y 
```        
`set(['o'])`
```py
# 并集
x | y 
```        
`set(['b', 'e', 'g', 'l', 'o', 'n', 'r', 'u'])`
```py
# 差集
x - y
```         
`set(['r', 'b', 'u', 'n'])` 
```py
# 补集
x ^ y
```
`set({'b', 'e', 'g', 'l', 'n', 'r', 'u'})`  
**交集** `&` : `x&y`，返回一个新的集合,包括同时在集合 `x` 和 `y` 中的*共同*元素  
**并集** `|` : `x|y`，返回一个新的集合,包括集合 `x` 和 `y` 中*所有*元素   
**差集** `-` : `x-y`，返回一个新的集合,包括在集合 `x` 中但不在集合 `y` 中的元素   
**补集** `^` : `x^y`，返回一个新的集合,包括集合 `x` 和 `y` 的**非共同**元素   
 ### [缓存装饰器](https://www.cnblogs.com/allen2333/p/10363388.html) [Ref](https://blog.csdn.net/ronon77/article/details/84897551)
简单使用    
```python
import functools
class Solution:
@functools.lru_cache(maxsize=None)
def fib(self, N):
    """
    :type N: int
    :rtype: int
    """
    if N <= 1:
        return N
    else:
        return self.fib(N - 1) + self.fib(N - 2)
```   
### [<big>`defaultdict()`</big>](https://www.jianshu.com/p/26df28b3bfc8) 
- 默认的`dict()`会因为没有初始值引发KeyError  
defaultdict类的初始化函数接受一个类型作为参数,当所访问的键不存在的时候,可以实例化一个值作为默认值  
初始化的几种方法:
```py
from collections import defaultdict
d = defaultdict(list)
d = defaultdict(int) #默认是0
d = defaultdict(lambda: 0) #利用lambda表达式初始化
```
- `setdeafult()` 方法设置默认值
```py
words = ['hello', 'world', 'nice', 'world']
counter = dict()
for kw in words:
    counter.setdefault(kw, 0)
    counter[kw] += 1
    ## 不存在则返回默认值,存在则返回值,因此可以下面这样写
    counter[kw] = counter.setdefault(kw, 0) + 1
```  
### <big>`bisect`</big> 有序序列查找或插入元素
- 查找
```python
import bisect
a = [1,2,3,4,5,6]
# 相等元素后 bisect_right == bisect
print(bisect.bisect_right(a, 3))
>> 4
# 相等元素前
print(bisect.bisect_left(a, 3))
>> 3
```   
- 插入
```python
import bisect 
a = [1,2,3,4,5]
bisect.insort(a, 3)
print(a)
>> [1,2,3,3,4,5]
``` 